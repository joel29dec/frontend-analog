{"ast":null,"code":"export default {\n  login: loginData => {\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(loginData)\n    };\n    return fetch('http://localhost:3000/api/v1/auth', reqObj).then(res => res.json());\n  },\n  signup: loginData => {\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(loginData)\n    };\n    return fetch('http://localhost:3000/api/v1/current_user', reqObj).then(res => res.json());\n  },\n  currentUser: token => {\n    const reqObj = {\n      method: 'GET',\n      headers: {\n        'Authorization': token\n      }\n    };\n    return fetch('http://localhost:3000/api/v1/current_user', reqObj).then(res => res.json());\n  },\n  updateUser: username => {\n    const reqObj = {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(username)\n    };\n    return fetch(\"http://localhost:3000/api/v1/current_user/\".concat(username.userID), reqObj).then(res => res.json());\n  },\n  deleteUser: user => {\n    return fetch(\"http://localhost:3000/api/v1/current_user/\".concat(user.userID), {\n      method: 'DELETE'\n    });\n  },\n  validator: cardNumber => {\n    const cardArray = cardNumber.toString().split(\"\").map(e => parseInt(e));\n    validlen(cardArray);\n    const splitArr = arrSplit(cardArray);\n    const checksum = sumArrDigits(splitArr.arr1).reduce((a, c) => a + c) + splitArr.arr2.reduce((a, c) => a + c);\n\n    if (checksum % 10 == 0) {\n      const typeValidatorArr = cardArray.slice(0, 2);\n      const typeValidatorInt = parseInt(typeValidatorArr.join(\"\"));\n\n      if (typeValidatorArr[0] == 4) {\n        return \"VISA\";\n      } else if (typeValidatorInt == 34 || typeValidatorInt == 37) {\n        return \"AMERICAN EXPRESS\";\n      } else if (typeValidatorInt == 22 || typeValidatorInt == 51 || typeValidatorInt == 52 || typeValidatorInt == 53 || typeValidatorInt == 54) {\n        return \"MASTERCARD\";\n      } else if (typeValidatorInt == 35) {\n        return \"JCB\";\n      } else if (typeValidatorInt == 60) {\n        return \"DISCOVER\";\n      } else if (typeValidatorInt == 30) {\n        return \"DINERS CLUB\";\n      } else {\n        return false;\n      }\n    }\n\n    function sumArrDigits(array) {\n      return array.join(\"\").split(\"\").map(e => parseInt(e));\n    }\n\n    function validlen(arr) {\n      return arr.length == 13 || arr.length == 15 || arr.length == 16;\n    }\n\n    function arrSplit(cardArray) {\n      const selectOddValues = cardArray.filter((a, i) => i % 2 === 1);\n      const selectEvenValues = cardArray.filter((a, i) => i % 2 === 0);\n      let arr1;\n      let arr2;\n\n      if (cardArray.length % 2 == 1) {\n        arr1 = selectOddValues.map(e => e * 2);\n        arr2 = selectEvenValues;\n      } else {\n        arr1 = selectEvenValues.map(e => e * 2);\n        arr2 = selectOddValues;\n      }\n\n      return {\n        arr1,\n        arr2\n      };\n    }\n  }\n};","map":{"version":3,"sources":["/Users/cookietelos/Development/Flatiron/Flatiron Pair Projects/analog/analog-frontend/src/services/api.js"],"names":["login","loginData","reqObj","method","headers","body","JSON","stringify","fetch","then","res","json","signup","currentUser","token","updateUser","username","userID","deleteUser","user","validator","cardNumber","cardArray","toString","split","map","e","parseInt","validlen","splitArr","arrSplit","checksum","sumArrDigits","arr1","reduce","a","c","arr2","typeValidatorArr","slice","typeValidatorInt","join","array","arr","length","selectOddValues","filter","i","selectEvenValues"],"mappings":"AAAA,eAAe;AACbA,EAAAA,KAAK,EAAGC,SAAD,IAAe;AACpB,UAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFI;AAKbC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,SAAf;AALO,KAAf;AAQA,WAAOO,KAAK,CAAC,mCAAD,EAAsCN,MAAtC,CAAL,CACJO,IADI,CACCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADR,CAAP;AAED,GAZY;AAebC,EAAAA,MAAM,EAAGX,SAAD,IAAe;AACrB,UAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFI;AAKbC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,SAAf;AALO,KAAf;AAQA,WAAOO,KAAK,CAAC,2CAAD,EAA8CN,MAA9C,CAAL,CACJO,IADI,CACCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADR,CAAP;AAED,GA1BY;AA8BbE,EAAAA,WAAW,EAAGC,KAAD,IAAW;AACtB,UAAMZ,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,KADK;AAEbC,MAAAA,OAAO,EAAE;AACP,yBAAiBU;AADV;AAFI,KAAf;AAOA,WAAON,KAAK,CAAC,2CAAD,EAA8CN,MAA9C,CAAL,CACJO,IADI,CACCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADR,CAAP;AAED,GAxCY;AA0CbI,EAAAA,UAAU,EAAGC,QAAD,IAAc;AACxB,UAAMd,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,OADK;AAEbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFI;AAKbC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeS,QAAf;AALO,KAAf;AAQA,WAAOR,KAAK,qDAA8CQ,QAAQ,CAACC,MAAvD,GAAiEf,MAAjE,CAAL,CACJO,IADI,CACCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADR,CAAP;AAED,GArDY;AAuDbO,EAAAA,UAAU,EAAGC,IAAD,IAAU;AACpB,WAAOX,KAAK,qDAA8CW,IAAI,CAACF,MAAnD,GAA6D;AAACd,MAAAA,MAAM,EAAE;AAAT,KAA7D,CAAZ;AACD,GAzDY;AA2DbiB,EAAAA,SAAS,EAAGC,UAAD,IAAe;AAC1B,UAAMC,SAAS,GAAGD,UAAU,CAACE,QAAX,GAAsBC,KAAtB,CAA4B,EAA5B,EAAgCC,GAAhC,CAAqCC,CAAD,IAAOC,QAAQ,CAACD,CAAD,CAAnD,CAAlB;AACAE,IAAAA,QAAQ,CAACN,SAAD,CAAR;AACA,UAAMO,QAAQ,GAAIC,QAAQ,CAACR,SAAD,CAA1B;AACA,UAAMS,QAAQ,GAAGC,YAAY,CAACH,QAAQ,CAACI,IAAV,CAAZ,CAA4BC,MAA5B,CAAmC,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAAjD,IAAsDP,QAAQ,CAACQ,IAAT,CAAcH,MAAd,CAAqB,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAAnC,CAAvE;;AAEA,QAAIL,QAAQ,GAAG,EAAX,IAAiB,CAArB,EAAuB;AAErB,YAAMO,gBAAgB,GAAGhB,SAAS,CAACiB,KAAV,CAAgB,CAAhB,EAAkB,CAAlB,CAAzB;AACA,YAAMC,gBAAgB,GAAGb,QAAQ,CAACW,gBAAgB,CAACG,IAAjB,CAAsB,EAAtB,CAAD,CAAjC;;AAEA,UAAIH,gBAAgB,CAAC,CAAD,CAAhB,IAAuB,CAA3B,EAA6B;AAC3B,eAAO,MAAP;AACD,OAFD,MAEM,IAAGE,gBAAgB,IAAI,EAApB,IAA0BA,gBAAgB,IAAI,EAAjD,EAAoD;AACxD,eAAO,kBAAP;AACD,OAFK,MAEA,IAAGA,gBAAgB,IAAI,EAApB,IAA0BA,gBAAgB,IAAI,EAA9C,IAAoDA,gBAAgB,IAAI,EAAxE,IAA8EA,gBAAgB,IAAI,EAAlG,IAAwGA,gBAAgB,IAAI,EAA/H,EAAkI;AACtI,eAAO,YAAP;AACD,OAFK,MAEA,IAAGA,gBAAgB,IAAI,EAAvB,EAA2B;AAC/B,eAAO,KAAP;AACD,OAFK,MAEA,IAAGA,gBAAgB,IAAI,EAAvB,EAA2B;AAC/B,eAAO,UAAP;AACD,OAFK,MAEA,IAAGA,gBAAgB,IAAI,EAAvB,EAA2B;AAC/B,eAAO,aAAP;AACD,OAFK,MAED;AACH,eAAO,KAAP;AACD;AACF;;AAGD,aAASR,YAAT,CAAsBU,KAAtB,EAA4B;AAC1B,aAAOA,KAAK,CAACD,IAAN,CAAW,EAAX,EAAejB,KAAf,CAAqB,EAArB,EAAyBC,GAAzB,CAA6BC,CAAC,IAAIC,QAAQ,CAACD,CAAD,CAA1C,CAAP;AACD;;AAED,aAASE,QAAT,CAAkBe,GAAlB,EAAsB;AACpB,aAAQA,GAAG,CAACC,MAAJ,IAAc,EAAd,IAAqBD,GAAG,CAACC,MAAJ,IAAc,EAAnC,IAAyCD,GAAG,CAACC,MAAJ,IAAc,EAA/D;AACD;;AAED,aAASd,QAAT,CAAkBR,SAAlB,EAA4B;AAC1B,YAAMuB,eAAe,GAAGvB,SAAS,CAACwB,MAAV,CAAiB,CAACX,CAAD,EAAGY,CAAH,KAAOA,CAAC,GAAC,CAAF,KAAQ,CAAhC,CAAxB;AACA,YAAMC,gBAAgB,GAAG1B,SAAS,CAACwB,MAAV,CAAiB,CAACX,CAAD,EAAGY,CAAH,KAAOA,CAAC,GAAC,CAAF,KAAQ,CAAhC,CAAzB;AACA,UAAId,IAAJ;AACA,UAAII,IAAJ;;AACA,UAAIf,SAAS,CAACsB,MAAV,GAAmB,CAAnB,IAAwB,CAA5B,EAA8B;AAC5BX,QAAAA,IAAI,GAAGY,eAAe,CAACpB,GAAhB,CAAoBC,CAAC,IAAIA,CAAC,GAAG,CAA7B,CAAP;AACAW,QAAAA,IAAI,GAAGW,gBAAP;AACD,OAHD,MAGM;AACJf,QAAAA,IAAI,GAAGe,gBAAgB,CAACvB,GAAjB,CAAqBC,CAAC,IAAIA,CAAC,GAAG,CAA9B,CAAP;AACAW,QAAAA,IAAI,GAAGQ,eAAP;AACD;;AACD,aAAO;AAACZ,QAAAA,IAAD;AAAOI,QAAAA;AAAP,OAAP;AACD;AACF;AA9Gc,CAAf","sourcesContent":["export default {\n  login: (loginData) => {\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(loginData)\n    }\n\n    return fetch('http://localhost:3000/api/v1/auth', reqObj)\n      .then(res => res.json())\n  },\n\n\n  signup: (loginData) => {\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(loginData)\n    }\n\n    return fetch('http://localhost:3000/api/v1/current_user', reqObj)\n      .then(res => res.json())\n  },\n\n\n\n  currentUser: (token) => {\n    const reqObj = {\n      method: 'GET',\n      headers: {\n        'Authorization': token\n      }\n    }\n\n    return fetch('http://localhost:3000/api/v1/current_user', reqObj)\n      .then(res => res.json())\n  },\n\n  updateUser: (username) => {\n    const reqObj = {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(username)\n    }\n  \n    return fetch(`http://localhost:3000/api/v1/current_user/${username.userID}`, reqObj)\n      .then(res => res.json())\n  },\n\n  deleteUser: (user) => {\n    return fetch(`http://localhost:3000/api/v1/current_user/${user.userID}`, {method: 'DELETE'})\n  },\n\n  validator: (cardNumber) =>{\n  const cardArray = cardNumber.toString().split(\"\").map((e) => parseInt(e) )\n  validlen(cardArray);\n  const splitArr =  arrSplit(cardArray)\n  const checksum = sumArrDigits(splitArr.arr1).reduce((a, c) => a + c) + splitArr.arr2.reduce((a, c) => a + c);\n\n  if (checksum % 10 == 0){\n    \n    const typeValidatorArr = cardArray.slice(0,2)\n    const typeValidatorInt = parseInt(typeValidatorArr.join(\"\"))\n    \n    if (typeValidatorArr[0] == 4){\n      return \"VISA\"\n    }else if(typeValidatorInt == 34 || typeValidatorInt == 37){\n      return \"AMERICAN EXPRESS\";\n    }else if(typeValidatorInt == 22 || typeValidatorInt == 51 || typeValidatorInt == 52 || typeValidatorInt == 53 || typeValidatorInt == 54){\n      return \"MASTERCARD\";\n    }else if(typeValidatorInt == 35 ){\n      return \"JCB\";\n    }else if(typeValidatorInt == 60 ){\n      return \"DISCOVER\";\n    }else if(typeValidatorInt == 30 ){\n      return \"DINERS CLUB\";\n    }else{\n      return false;\n    }\n  }\n\n\n  function sumArrDigits(array){\n    return array.join(\"\").split(\"\").map(e => parseInt(e))\n  }\n\n  function validlen(arr){\n    return  arr.length == 13  || arr.length == 15 || arr.length == 16\n  }\n\n  function arrSplit(cardArray){\n    const selectOddValues = cardArray.filter((a,i)=>i%2 === 1);\n    const selectEvenValues = cardArray.filter((a,i)=>i%2 === 0);\n    let arr1;\n    let arr2;\n    if (cardArray.length % 2 == 1){\n      arr1 = selectOddValues.map(e => e * 2);\n      arr2 = selectEvenValues;\n    }else {\n      arr1 = selectEvenValues.map(e => e * 2);\n      arr2 = selectOddValues;\n    }\n    return {arr1, arr2}\n  }\n}\n}\n"]},"metadata":{},"sourceType":"module"}